[build]
builder = "NIXPACKS"
buildCommand = """
pip install -r backend/requirements.txt
npm ci --prefix frontend
npm run build --prefix frontend
mkdir -p backend/app/static
cp -r frontend/dist/* backend/app/static/
"""

[deploy]
startCommand = "python -m uvicorn backend.app.main:app --host 0.0.0.0 --port ${PORT:-8080}"
healthcheckPath = "/healthz"
restartPolicyType = "ON_FAILURE"